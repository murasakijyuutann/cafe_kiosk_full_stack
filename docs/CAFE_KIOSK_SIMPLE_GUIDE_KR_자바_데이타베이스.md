# ì¹´í˜ í‚¤ì˜¤ìŠ¤í¬ í”„ë¡œì íŠ¸ - ì´ˆë³´ììš© ê°„ë‹¨ ê°€ì´ë“œ ìë°”ë‘ ë°ì´í„°ë² ì´ìŠ¤ìš©

## 4ì¸ íŒ€ í”„ë¡œì íŠ¸ (ê°„ì†Œí™” ë²„ì „)

---

## ğŸ“š ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [íŒŒì¼ êµ¬ì¡°](#íŒŒì¼-êµ¬ì¡°)
3. [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ](#ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ)
4. [íŒ€ ì—­í•  ë¶„ë‹´](#íŒ€-ì—­í• -ë¶„ë‹´)
5. [ë‹¨ê³„ë³„ ê°œë°œ ê°€ì´ë“œ](#ë‹¨ê³„ë³„-ê°œë°œ-ê°€ì´ë“œ)
6. [ì „ì²´ ì½”ë“œ ì˜ˆì œ](#ì „ì²´-ì½”ë“œ-ì˜ˆì œ)
7. [ì£¼ì°¨ë³„ ì¼ì •](#ì£¼ì°¨ë³„-ì¼ì •)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Client Browser                       â”‚
â”‚              (React SPA on port 5173)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP/HTTPS
                     â”‚ Axios Requests
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Spring Boot REST API                        â”‚
â”‚                 (port 8080)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  REST Controllers (/api/*)                     â”‚      â”‚
â”‚  â”‚  - MenuApiController                           â”‚      â”‚
â”‚  â”‚  - OrderApiController                          â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚               â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Service Layer                                 â”‚      â”‚
â”‚  â”‚  - MenuService                                 â”‚      â”‚
â”‚  â”‚  - OrderService                                â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚               â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Repository Layer (Spring Data JPA)            â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MySQL Database                        â”‚
â”‚         (categories, menu_items, orders, order_items)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

### í”„ë¡œì íŠ¸ëª…

**CafeKiosk** - ì…€í”„ ì„œë¹„ìŠ¤ ì¹´í˜ ì£¼ë¬¸ í‚¤ì˜¤ìŠ¤í¬

### í•µì‹¬ ê¸°ëŠ¥

âœ… ë©”ë‰´ ì¹´í…Œê³ ë¦¬ë³„ ì¡°íšŒ (ì»¤í”¼, ë””ì €íŠ¸, ìŒë£Œ)
âœ… ì¥ë°”êµ¬ë‹ˆì— í•­ëª© ì¶”ê°€
âœ… ì£¼ë¬¸ ìƒì„± ë° ì´ì•¡ ê³„ì‚°
âœ… ì£¼ë¬¸ ì™„ë£Œ í™•ì¸ í˜ì´ì§€

### ê¸°ìˆ  ìŠ¤íƒ

- **Backend**: Spring Boot 3.5.6, Java 21
- **Database**: MySQL 8.0
- **Frontend**: Thymeleaf + Bootstrap 5
- **Build Tool**: Maven

### ì œì™¸ëœ ê¸°ëŠ¥ (ê°„ì†Œí™”)

âŒ ë¡œê·¸ì¸/íšŒì›ê°€ì… (ì¸ì¦ ì—†ìŒ)
âŒ ê´€ë¦¬ì í˜ë„ (ë‚˜ì¤‘ì— ì¶”ê°€ ê°€ëŠ¥)
âŒ ê²°ì œ ì—°ë™ (ì¼ë‹¨ ëª¨ì˜ ê²°ì œ)
âŒ REST API (ì›¹ í˜ì´ì§€ë§Œ)

---

## íŒŒì¼ êµ¬ì¡°

```
cafe-kiosk/
â”œâ”€â”€ pom.xml # Maven ì˜ì¡´ì„±
â”œâ”€â”€ .env # DB ìê²©ì¦ëª… (ì»¤ë°‹í•˜ì§€ ë§ ê²ƒ!)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”‚
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ main/
â”‚ â”‚ â”œâ”€â”€ java/com/cafekiosk/
â”‚ â”‚ â”‚ â”œâ”€â”€ CafekioskApplication.java # ë©”ì¸ ì‹¤í–‰ íŒŒì¼
â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”œâ”€â”€ model/ # ğŸ“¦ ì—”í‹°í‹° (íŒ€ì› 1)
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Category.java # ì¹´í…Œê³ ë¦¬ (ì»¤í”¼, ë””ì €íŠ¸ ë“±)
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ MenuItem.java # ë©”ë‰´ í•­ëª©
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Order.java # ì£¼ë¬¸
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ OrderItem.java # ì£¼ë¬¸ í•­ëª©
â”‚ â”‚ â”‚ â”‚ â””â”€â”€ OrderStatus.java # ì£¼ë¬¸ ìƒíƒœ enum
â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”œâ”€â”€ repository/ # ğŸ—„ï¸ DB ì ‘ê·¼ (íŒ€ì› 1)
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ CategoryRepository.java
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ MenuItemRepository.java
â”‚ â”‚ â”‚ â”‚ â””â”€â”€ OrderRepository.java
â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”œâ”€â”€ dto/ # ğŸ“„ ë°ì´í„° ì „ì†¡ ê°ì²´ (íŒ€ì› 2)
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ CartItem.java # ì¥ë°”êµ¬ë‹ˆ í•­ëª©
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ OrderRequest.java # ì£¼ë¬¸ ìš”ì²­
â”‚ â”‚ â”‚ â”‚ â””â”€â”€ OrderResponse.java # ì£¼ë¬¸ ì‘ë‹µ
â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”œâ”€â”€ service/ # âš™ï¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (íŒ€ì› 2)
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ MenuService.java # ë©”ë‰´ ì¡°íšŒ
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ CartService.java # ì¥ë°”êµ¬ë‹ˆ ê´€ë¦¬
â”‚ â”‚ â”‚ â”‚ â””â”€â”€ OrderService.java # ì£¼ë¬¸ ìƒì„±
â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”œâ”€â”€ controller/ # ğŸ® ì»¨íŠ¸ë¡¤ëŸ¬ (íŒ€ì› 3)
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ HomeController.java # í™ˆ í˜ì´ì§€
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ MenuController.java # ë©”ë‰´ í˜ì´ì§€
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ CartController.java # ì¥ë°”êµ¬ë‹ˆ
â”‚ â”‚ â”‚ â”‚ â””â”€â”€ OrderController.java # ì£¼ë¬¸ ì²˜ë¦¬
â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”œâ”€â”€ exception/ # âš ï¸ ì˜ˆì™¸ ì²˜ë¦¬ (íŒ€ì› 3)
â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ GlobalExceptionHandler.java
â”‚ â”‚ â”‚ â”‚ â””â”€â”€ ResourceNotFoundException.java
â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€ config/ # âš™ï¸ ì„¤ì • (íŒ€ ë¦¬ë”)
â”‚ â”‚ â”‚ â””â”€â”€ WebConfig.java
â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€ resources/
â”‚ â”‚ â”œâ”€â”€ application.yml # ì•± ì„¤ì •
â”‚ â”‚ â”œâ”€â”€ data.sql # ìƒ˜í”Œ ë°ì´í„°
â”‚ â””â”€â”€ test/
â”‚ â””â”€â”€ java/com/cafekiosk/
â”‚ â”œâ”€â”€ service/
â”‚ â”‚ â””â”€â”€ OrderServiceTest.java
â”‚ â””â”€â”€ repository/
â”‚ â””â”€â”€ MenuItemRepositoryTest.java
â”‚
â””â”€â”€ docs/
â””â”€â”€ TEAM_TASKS.md # íŒ€ì›ë³„ í• ì¼ ëª©ë¡
```

**ì´ íŒŒì¼ ìˆ˜**: ~20ê°œ (ê´€ë¦¬ ê°€ëŠ¥í•œ ìˆ˜ì¤€!)

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### ERD (Entity Relationship Diagram)

```

```

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Category     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ name            â”‚
â”‚ description     â”‚
â”‚ display_order   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MenuItem     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ name            â”‚
â”‚ description     â”‚
â”‚ price           â”‚
â”‚ image_url       â”‚
â”‚ available       â”‚
â”‚ category_id(FK) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ N:M (through OrderItem)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Order       â”‚ 1:N     â”‚   OrderItem     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚         â”‚ id (PK)         â”‚
â”‚ order_number    â”‚         â”‚ order_id (FK)   â”‚
â”‚ customer_name   â”‚         â”‚ menu_item_id(FK)â”‚
â”‚ total_amount    â”‚         â”‚ quantity        â”‚
â”‚ status          â”‚         â”‚ price           â”‚
â”‚ ordered_at      â”‚         â”‚ subtotal        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

### í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ (MySQL)

#### 1. `categories` í…Œì´ë¸”

```sql
CREATE TABLE categories (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    description VARCHAR(200),
    display_order INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

ALTER TABLE categories CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

**ì»¬ëŸ¼ ì„¤ëª…:**

- `id`: ì¹´í…Œê³ ë¦¬ ê³ ìœ  ID
- `name`: ì¹´í…Œê³ ë¦¬ ì´ë¦„ (ì˜ˆ: "ì»¤í”¼", "ë””ì €íŠ¸", "ìŒë£Œ")
- `description`: ì¹´í…Œê³ ë¦¬ ì„¤ëª…
- `display_order`: í™”ë©´ í‘œì‹œ ìˆœì„œ (ì‘ì„ìˆ˜ë¡ ë¨¼ì €)
- `created_at`: ìƒì„± ì‹œê°„

**ìƒ˜í”Œ ë°ì´í„°:**

```sql
INSERT INTO categories (name, description, display_order) VALUES
('ì»¤í”¼', 'ì‹ ì„ í•œ ì›ë‘ë¡œ ë§Œë“  ì»¤í”¼', 1),
('ë””ì €íŠ¸', 'ë‹¬ì½¤í•œ ë””ì €íŠ¸', 2),
('ìŒë£Œ', 'ì‹œì›í•œ ìŒë£Œ', 3);
```

---

#### 2. `menu_items` í…Œì´ë¸”

```sql
CREATE TABLE menu_items (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description VARCHAR(500),
    price DECIMAL(10, 2) NOT NULL,
    image_url VARCHAR(300),
    available BOOLEAN DEFAULT TRUE,
    category_id BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    FOREIGN KEY (category_id) REFERENCES categories(id),
    INDEX idx_category (category_id),
    INDEX idx_available (available)
);
```

**ì»¬ëŸ¼ ì„¤ëª…:**

- `id`: ë©”ë‰´ í•­ëª© ê³ ìœ  ID
- `name`: ë©”ë‰´ ì´ë¦„ (ì˜ˆ: "ì•„ë©”ë¦¬ì¹´ë…¸", "ì¹´í˜ë¼ë–¼")
- `description`: ë©”ë‰´ ì„¤ëª…
- `price`: ê°€ê²© (DECIMAL ì‚¬ìš© - ì •í™•í•œ ê¸ˆì•¡ ê³„ì‚°)
- `image_url`: ì´ë¯¸ì§€ URL
- `available`: íŒë§¤ ê°€ëŠ¥ ì—¬ë¶€ (í’ˆì ˆ ì‹œ false)
- `category_id`: ì¹´í…Œê³ ë¦¬ ì™¸ë˜í‚¤
- `created_at`: ìƒì„± ì‹œê°„
- `updated_at`: ìˆ˜ì • ì‹œê°„

**ìƒ˜í”Œ ë°ì´í„°:**

```sql
INSERT INTO menu_items (name, description, price, image_url, available, category_id) VALUES
-- ì»¤í”¼ (category_id = 1)
('ì•„ë©”ë¦¬ì¹´ë…¸', 'ê¹”ë”í•œ ì—ìŠ¤í”„ë ˆì†Œì™€ ë¬¼', 3000.00, '/images/menu/americano.jpg', TRUE, 1),
('ì¹´í˜ë¼ë–¼', 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ ì™€ ì—ìŠ¤í”„ë ˆì†Œ', 3500.00, '/images/menu/latte.jpg', TRUE, 1),
('ì¹´í‘¸ì¹˜ë…¸', 'í’ì„±í•œ ê±°í’ˆê³¼ ì—ìŠ¤í”„ë ˆì†Œ', 3500.00, '/images/menu/cappuccino.jpg', TRUE, 1),

-- ë””ì €íŠ¸ (category_id = 2)
('ì´ˆì½œë¦¿ ì¼€ì´í¬', 'ì§„í•œ ì´ˆì½œë¦¿ ì¼€ì´í¬', 5000.00, '/images/menu/choco-cake.jpg', TRUE, 2),
('ì¹˜ì¦ˆì¼€ì´í¬', 'ë¶€ë“œëŸ¬ìš´ ë‰´ìš• ìŠ¤íƒ€ì¼', 5500.00, '/images/menu/cheesecake.jpg', TRUE, 2),
('í¬ë£¨ì•„ìƒ', 'ë°”ì‚­í•œ ë²„í„° í¬ë£¨ì•„ìƒ', 3000.00, '/images/menu/croissant.jpg', TRUE, 2),

-- ìŒë£Œ (category_id = 3)
('ì˜¤ë Œì§€ ì£¼ìŠ¤', 'ì‹ ì„ í•œ ì˜¤ë Œì§€ ì£¼ìŠ¤', 4000.00, '/images/menu/orange-juice.jpg', TRUE, 3),
('ë”¸ê¸° ìŠ¤ë¬´ë””', 'ë‹¬ì½¤í•œ ë”¸ê¸° ìŠ¤ë¬´ë””', 4500.00, '/images/menu/strawberry-smoothie.jpg', TRUE, 3);
```

---

#### 3. `orders` í…Œì´ë¸”

```sql
CREATE TABLE orders (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    order_number VARCHAR(20) NOT NULL UNIQUE,
    customer_name VARCHAR(100),
    total_amount DECIMAL(10, 2) NOT NULL,
    status VARCHAR(20) NOT NULL,
    ordered_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    INDEX idx_order_number (order_number),
    INDEX idx_status (status),
    INDEX idx_ordered_at (ordered_at)
);
```

**ì»¬ëŸ¼ ì„¤ëª…:**

- `id`: ì£¼ë¬¸ ê³ ìœ  ID
- `order_number`: ì£¼ë¬¸ ë²ˆí˜¸ (ì˜ˆ: "ORD-20250107-001")
- `customer_name`: ê³ ê° ì´ë¦„ (ì„ íƒì‚¬í•­)
- `total_amount`: ì´ ê¸ˆì•¡
- `status`: ì£¼ë¬¸ ìƒíƒœ (PENDING, PREPARING, READY, COMPLETED)
- `ordered_at`: ì£¼ë¬¸ ì‹œê°„
- `completed_at`: ì™„ë£Œ ì‹œê°„
- `created_at`: ìƒì„± ì‹œê°„
- `updated_at`: ìˆ˜ì • ì‹œê°„

---

#### 4. `order_items` í…Œì´ë¸”

```sql
CREATE TABLE order_items (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    order_id BIGINT NOT NULL,
    menu_item_id BIGINT NOT NULL,
    quantity INT NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    subtotal DECIMAL(10, 2) NOT NULL,

    FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE,
    FOREIGN KEY (menu_item_id) REFERENCES menu_items(id),
    INDEX idx_order (order_id)
);
```

**ì»¬ëŸ¼ ì„¤ëª…:**

- `id`: ì£¼ë¬¸ í•­ëª© ê³ ìœ  ID
- `order_id`: ì£¼ë¬¸ ì™¸ë˜í‚¤
- `menu_item_id`: ë©”ë‰´ í•­ëª© ì™¸ë˜í‚¤
- `quantity`: ìˆ˜ëŸ‰
- `price`: ì£¼ë¬¸ ë‹¹ì‹œ ê°€ê²© (ê°€ê²© ë³€ë™ ëŒ€ë¹„)
- `subtotal`: ì†Œê³„ (price Ã— quantity)

**ì¤‘ìš”:** `ON DELETE CASCADE` - ì£¼ë¬¸ ì‚­ì œ ì‹œ ì£¼ë¬¸ í•­ëª©ë„ í•¨ê»˜ ì‚­ì œ

---

### ë°ì´í„°ë² ì´ìŠ¤ ê´€ê³„ ìš”ì•½

| ê´€ê³„                     | ì„¤ëª…                                    |
| ------------------------ | --------------------------------------- |
| **Category â†’ MenuItem**  | 1:N (í•œ ì¹´í…Œê³ ë¦¬ëŠ” ì—¬ëŸ¬ ë©”ë‰´ í•­ëª© í¬í•¨) |
| **Order â†’ OrderItem**    | 1:N (í•œ ì£¼ë¬¸ì€ ì—¬ëŸ¬ ì£¼ë¬¸ í•­ëª© í¬í•¨)     |
| **MenuItem â†’ OrderItem** | 1:N (í•œ ë©”ë‰´ëŠ” ì—¬ëŸ¬ ì£¼ë¬¸ì— í¬í•¨ ê°€ëŠ¥)   |

---

### ì¸ë±ìŠ¤ ì „ëµ

```sql
-- ìì£¼ ì¡°íšŒë˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_menu_category ON menu_items(category_id);
CREATE INDEX idx_menu_available ON menu_items(available);
CREATE INDEX idx_order_status ON orders(status);
CREATE INDEX idx_order_date ON orders(ordered_at);
```

**ì¸ë±ìŠ¤ ì´ìœ :**

- ì¹´í…Œê³ ë¦¬ë³„ ë©”ë‰´ ì¡°íšŒê°€ ë¹ ë¦„
- íŒë§¤ ê°€ëŠ¥í•œ ë©”ë‰´ë§Œ í•„í„°ë§
- ì£¼ë¬¸ ìƒíƒœë³„ ì¡°íšŒ (PENDING, READY ë“±)
- ë‚ ì§œë³„ ì£¼ë¬¸ í†µê³„

---

## íŒ€ ì—­í•  ë¶„ë‹´

### ğŸ‘¤ íŒ€ì› 1: ë°ì´í„°ë² ì´ìŠ¤ ê³„ì¸µ

**íŒŒì¼:** `model/` + `repository/`

**ì‘ì—… ë‚´ìš©:**

1. âœ… Entity 5ê°œ ì‘ì„±

   - `Category.java`
   - `MenuItem.java`
   - `Order.java`
   - `OrderItem.java`
   - `OrderStatus.java` (enum)

2. âœ… Repository 3ê°œ ì‘ì„±
   - `CategoryRepository.java`
   - `MenuItemRepository.java`
   - `OrderRepository.java`

**ì˜ˆìƒ ì†Œìš” ì‹œê°„:** 2-3ì¼

---

### ğŸ‘¤ íŒ€ì› 2: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**íŒŒì¼:** `dto/` + `service/`

**ì‘ì—… ë‚´ìš©:**

1. âœ… DTO 3ê°œ ì‘ì„±

   - `CartItem.java`
   - `OrderRequest.java`
   - `OrderResponse.java`

2. âœ… Service 3ê°œ ì‘ì„±
   - `MenuService.java`
   - `CartService.java`
   - `OrderService.java`

**ì˜ˆìƒ ì†Œìš” ì‹œê°„:** 3-4ì¼

---

### ğŸ‘¤ íŒ€ì› 3: ì»¨íŠ¸ë¡¤ëŸ¬

**íŒŒì¼:** `controller/` + `exception/`

**ì‘ì—… ë‚´ìš©:**

1. âœ… Controller 4ê°œ ì‘ì„±

   - `HomeController.java`
   - `MenuController.java`
   - `CartController.java`
   - `OrderController.java`

2. âœ… Exception 2ê°œ ì‘ì„±
   - `GlobalExceptionHandler.java`
   - `ResourceNotFoundException.java`

**ì˜ˆìƒ ì†Œìš” ì‹œê°„:** 3-4ì¼

## ë‹¨ê³„ë³„ ê°œë°œ ê°€ì´ë“œ

### 1ë‹¨ê³„: í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (1ì¼ì°¨)

#### 1.1 Spring Initializrë¡œ í”„ë¡œì íŠ¸ ìƒì„±

1. https://start.spring.io/ ì ‘ì†
2. ì„¤ì •:

   ```
   Project: Maven
   Language: Java
   Spring Boot: 3.5.6
   Java: 21
   Group: com.cafekiosk
   Artifact: cafe-kiosk
   Packaging: Jar
   ```

3. Dependencies ì¶”ê°€:

   - Spring Web
   - Spring Data JPA
   - MySQL Driver
   - Thymeleaf
   - Lombok
   - Validation

4. **GENERATE** í´ë¦­ í›„ ë‹¤ìš´ë¡œë“œ

---

#### 1.2 í”„ë¡œì íŠ¸ ì„¤ì •

**`.env` íŒŒì¼ ìƒì„±** (ë£¨íŠ¸ ë””ë ‰í† ë¦¬):

```properties
DB_USERNAME=root
DB_PASSWORD=your_password
```

**`.gitignore` íŒŒì¼ ìƒì„±**:

```
target/
.env
*.log
.idea/
*.iml
.DS_Store
```

**`application.yml` ì„¤ì •** (`src/main/resources/`):

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/cafe_kiosk?useSSL=false&serverTimezone=Asia/Seoul
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQLDialect

  thymeleaf:
    cache: false
    prefix: classpath:/templates/
    suffix: .html

server:
  port: 8080

logging:
  level:
    org.hibernate.SQL: DEBUG
```

---

#### 1.3 MySQL ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±

```sql
CREATE DATABASE cafe_kiosk CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

---

#### 1.4 `pom.xml`ì— ì¶”ê°€ ì˜ì¡´ì„±

```xml
<!-- ì¶”ê°€ ì˜ì¡´ì„± -->
<dependency>
    <groupId>me.paulschwarz</groupId>
    <artifactId>spring-dotenv</artifactId>
    <version>4.0.0</version>
</dependency>

<dependency>
    <groupId>org.webjars</groupId>
    <artifactId>bootstrap</artifactId>
    <version>5.3.2</version>
</dependency>

<dependency>
    <groupId>org.webjars</groupId>
    <artifactId>webjars-locator</artifactId>
    <version>0.52</version>
</dependency>
```

---

### 2ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ê³„ì¸µ (íŒ€ì› 1)

#### 2.1 OrderStatus.java (Enum)

```java
package com.cafekiosk.model;

public enum OrderStatus {
    PENDING,      // ëŒ€ê¸° ì¤‘
    PREPARING,    // ì¤€ë¹„ ì¤‘
    READY,        // ì¤€ë¹„ ì™„ë£Œ
    COMPLETED     // í”½ì—… ì™„ë£Œ
}
```

---

#### 2.2 Category.java

```java
package com.cafekiosk.model;

import jakarta.persistence.*;
import lombok.*;

import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

@Entity
@Table(name = "categories")
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class Category {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(nullable = false, unique = true, length = 50)
    private String name;

    @Column(length = 200)
    private String description;

    @Column(name = "display_order")
    private Integer displayOrder = 0;

    @OneToMany(mappedBy = "category", cascade = CascadeType.ALL)
    @ToString.Exclude
    @Builder.Default
    private List<MenuItem> menuItems = new ArrayList<>();

    @Column(name = "created_at", updatable = false)
    private LocalDateTime createdAt;

    @PrePersist
    protected void onCreate() {
        createdAt = LocalDateTime.now();
    }
}
```

---

#### 2.3 MenuItem.java

```java
package com.cafekiosk.model;

import jakarta.persistence.*;
import lombok.*;

import java.math.BigDecimal;
import java.time.LocalDateTime;

@Entity
@Table(name = "menu_items")
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class MenuItem {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(nullable = false, length = 100)
    private String name;

    @Column(length = 500)
    private String description;

    @Column(nullable = false, precision = 10, scale = 2)
    private BigDecimal price;

    @Column(name = "image_url", length = 300)
    private String imageUrl;

    @Column(nullable = false)
    @Builder.Default
    private Boolean available = true;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "category_id", nullable = false)
    private Category category;

    @Column(name = "created_at", updatable = false)
    private LocalDateTime createdAt;

    @Column(name = "updated_at")
    private LocalDateTime updatedAt;

    @PrePersist
    protected void onCreate() {
        createdAt = LocalDateTime.now();
        updatedAt = LocalDateTime.now();
    }

    @PreUpdate
    protected void onUpdate() {
        updatedAt = LocalDateTime.now();
    }
}
```

---

#### 2.4 Order.java

```java
package com.cafekiosk.model;

import jakarta.persistence.*;
import lombok.*;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

@Entity
@Table(name = "orders")
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class Order {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "order_number", nullable = false, unique = true, length = 20)
    private String orderNumber;

    @Column(name = "customer_name", length = 100)
    private String customerName;

    @Column(name = "total_amount", nullable = false, precision = 10, scale = 2)
    private BigDecimal totalAmount;

    @Enumerated(EnumType.STRING)
    @Column(nullable = false, length = 20)
    private OrderStatus status;

    @OneToMany(mappedBy = "order", cascade = CascadeType.ALL, orphanRemoval = true)
    @Builder.Default
    private List<OrderItem> orderItems = new ArrayList<>();

    @Column(name = "ordered_at")
    private LocalDateTime orderedAt;

    @Column(name = "completed_at")
    private LocalDateTime completedAt;

    @Column(name = "created_at", updatable = false)
    private LocalDateTime createdAt;

    @Column(name = "updated_at")
    private LocalDateTime updatedAt;

    @PrePersist
    protected void onCreate() {
        createdAt = LocalDateTime.now();
        updatedAt = LocalDateTime.now();
        orderedAt = LocalDateTime.now();
        if (status == null) {
            status = OrderStatus.PENDING;
        }
    }

    @PreUpdate
    protected void onUpdate() {
        updatedAt = LocalDateTime.now();
        if (status == OrderStatus.COMPLETED && completedAt == null) {
            completedAt = LocalDateTime.now();
        }
    }
}
```

---

#### 2.5 OrderItem.java

```java
package com.cafekiosk.model;

import jakarta.persistence.*;
import lombok.*;

import java.math.BigDecimal;

@Entity
@Table(name = "order_items")
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class OrderItem {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "order_id", nullable = false)
    @ToString.Exclude
    private Order order;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "menu_item_id", nullable = false)
    private MenuItem menuItem;

    @Column(nullable = false)
    private Integer quantity;

    @Column(nullable = false, precision = 10, scale = 2)
    private BigDecimal price;

    @Column(nullable = false, precision = 10, scale = 2)
    private BigDecimal subtotal;

    // ì†Œê³„ ê³„ì‚° í—¬í¼ ë©”ì„œë“œ
    public void calculateSubtotal() {
        if (price != null && quantity != null) {
            this.subtotal = price.multiply(BigDecimal.valueOf(quantity));
        }
    }
}
```

---

#### 2.6 Repository ì¸í„°í˜ì´ìŠ¤

**CategoryRepository.java:**

```java
package com.cafekiosk.repository;

import com.cafekiosk.model.Category;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public interface CategoryRepository extends JpaRepository<Category, Long> {
    List<Category> findAllByOrderByDisplayOrderAsc();
}
```

**MenuItemRepository.java:**

```java
package com.cafekiosk.repository;

import com.cafekiosk.model.MenuItem;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public interface MenuItemRepository extends JpaRepository<MenuItem, Long> {

    // ì¹´í…Œê³ ë¦¬ë³„ ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ë‰´ ì¡°íšŒ
    List<MenuItem> findByCategoryIdAndAvailableTrue(Long categoryId);

    // ëª¨ë“  ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ë‰´ ì¡°íšŒ
    List<MenuItem> findByAvailableTrue();
}
```

**OrderRepository.java:**

```java
package com.cafekiosk.repository;

import com.cafekiosk.model.Order;
import com.cafekiosk.model.OrderStatus;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

import java.util.List;
import java.util.Optional;

@Repository
public interface OrderRepository extends JpaRepository<Order, Long> {

    Optional<Order> findByOrderNumber(String orderNumber);

    List<Order> findByStatusOrderByOrderedAtAsc(OrderStatus status);
}
```

---

### 3ë‹¨ê³„: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (íŒ€ì› 2)

#### 3.1 CartItem.java (DTO)

```java
package com.cafekiosk.dto;

import lombok.*;

import java.math.BigDecimal;

@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class CartItem {

    private Long menuItemId;
    private String menuItemName;
    private BigDecimal price;
    private Integer quantity;
    private BigDecimal subtotal;

    // ì†Œê³„ ê³„ì‚°
    public void calculateSubtotal() {
        if (price != null && quantity != null) {
            this.subtotal = price.multiply(BigDecimal.valueOf(quantity));
        }
    }
}
```

---

#### 3.2 OrderRequest.java (DTO)

```java
package com.cafekiosk.dto;

import lombok.*;

import java.util.List;

@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class OrderRequest {

    private String customerName;
    private List<CartItem> items;
}
```

---

#### 3.3 OrderResponse.java (DTO)

```java
package com.cafekiosk.dto;

import com.cafekiosk.model.OrderStatus;
import lombok.*;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.List;

@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class OrderResponse {

    private Long id;
    private String orderNumber;
    private String customerName;
    private BigDecimal totalAmount;
    private OrderStatus status;
    private List<CartItem> items;
    private LocalDateTime orderedAt;
}
```

---

#### 3.4 MenuService.java

```java
package com.cafekiosk.service;

import com.cafekiosk.model.Category;
import com.cafekiosk.model.MenuItem;
import com.cafekiosk.repository.CategoryRepository;
import com.cafekiosk.repository.MenuItemRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;

@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class MenuService {

    private final CategoryRepository categoryRepository;
    private final MenuItemRepository menuItemRepository;

    // ëª¨ë“  ì¹´í…Œê³ ë¦¬ ì¡°íšŒ
    public List<Category> getAllCategories() {
        return categoryRepository.findAllByOrderByDisplayOrderAsc();
    }

    // ëª¨ë“  ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ë‰´ ì¡°íšŒ
    public List<MenuItem> getAllAvailableMenuItems() {
        return menuItemRepository.findByAvailableTrue();
    }

    // ì¹´í…Œê³ ë¦¬ë³„ ë©”ë‰´ ì¡°íšŒ
    public List<MenuItem> getMenuItemsByCategory(Long categoryId) {
        return menuItemRepository.findByCategoryIdAndAvailableTrue(categoryId);
    }

    // ë©”ë‰´ IDë¡œ ì¡°íšŒ
    public MenuItem getMenuItemById(Long id) {
        return menuItemRepository.findById(id)
                .orElseThrow(() -> new RuntimeException("ë©”ë‰´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + id));
    }
}
```

---

#### 3.5 CartService.java

```java
package com.cafekiosk.service;

import com.cafekiosk.dto.CartItem;
import com.cafekiosk.model.MenuItem;
import jakarta.servlet.http.HttpSession;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;

import java.util.ArrayList;
import java.util.List;

@Service
@RequiredArgsConstructor
public class CartService {

    private static final String CART_SESSION_KEY = "cart";

    private final MenuService menuService;

    // ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ
    @SuppressWarnings("unchecked")
    public List<CartItem> getCart(HttpSession session) {
        List<CartItem> cart = (List<CartItem>) session.getAttribute(CART_SESSION_KEY);
        if (cart == null) {
            cart = new ArrayList<>();
            session.setAttribute(CART_SESSION_KEY, cart);
        }
        return cart;
    }

    // ì¥ë°”êµ¬ë‹ˆì— í•­ëª© ì¶”ê°€
    public void addToCart(HttpSession session, Long menuItemId, Integer quantity) {
        MenuItem menuItem = menuService.getMenuItemById(menuItemId);
        List<CartItem> cart = getCart(session);

        // ì´ë¯¸ ì¥ë°”êµ¬ë‹ˆì— ìˆëŠ”ì§€ í™•ì¸
        CartItem existingItem = cart.stream()
                .filter(item -> item.getMenuItemId().equals(menuItemId))
                .findFirst()
                .orElse(null);

        if (existingItem != null) {
            // ìˆ˜ëŸ‰ ì¦ê°€
            existingItem.setQuantity(existingItem.getQuantity() + quantity);
            existingItem.calculateSubtotal();
        } else {
            // ìƒˆ í•­ëª© ì¶”ê°€
            CartItem newItem = CartItem.builder()
                    .menuItemId(menuItem.getId())
                    .menuItemName(menuItem.getName())
                    .price(menuItem.getPrice())
                    .quantity(quantity)
                    .build();
            newItem.calculateSubtotal();
            cart.add(newItem);
        }
    }

    // ì¥ë°”êµ¬ë‹ˆì—ì„œ í•­ëª© ì œê±°
    public void removeFromCart(HttpSession session, Long menuItemId) {
        List<CartItem> cart = getCart(session);
        cart.removeIf(item -> item.getMenuItemId().equals(menuItemId));
    }

    // ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
    public void clearCart(HttpSession session) {
        session.removeAttribute(CART_SESSION_KEY);
    }

    // ì¥ë°”êµ¬ë‹ˆ ì´ì•¡ ê³„ì‚°
    public java.math.BigDecimal getCartTotal(HttpSession session) {
        List<CartItem> cart = getCart(session);
        return cart.stream()
                .map(CartItem::getSubtotal)
                .reduce(java.math.BigDecimal.ZERO, java.math.BigDecimal::add);
    }
}
```

---

#### 3.6 OrderService.java

```java
package com.cafekiosk.service;

import com.cafekiosk.dto.CartItem;
import com.cafekiosk.dto.OrderRequest;
import com.cafekiosk.dto.OrderResponse;
import com.cafekiosk.model.*;
import com.cafekiosk.repository.OrderRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.List;
import java.util.stream.Collectors;

@Service
@RequiredArgsConstructor
@Transactional
public class OrderService {

    private final OrderRepository orderRepository;
    private final MenuService menuService;

    // ì£¼ë¬¸ ìƒì„±
    public OrderResponse createOrder(OrderRequest request) {
        // ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„± (ì˜ˆ: ORD-20250107-001)
        String orderNumber = generateOrderNumber();

        // ì´ì•¡ ê³„ì‚°
        BigDecimal totalAmount = request.getItems().stream()
                .map(CartItem::getSubtotal)
                .reduce(BigDecimal.ZERO, BigDecimal::add);

        // ì£¼ë¬¸ ì—”í‹°í‹° ìƒì„±
        Order order = Order.builder()
                .orderNumber(orderNumber)
                .customerName(request.getCustomerName())
                .totalAmount(totalAmount)
                .status(OrderStatus.PENDING)
                .build();

        // ì£¼ë¬¸ í•­ëª© ì¶”ê°€
        for (CartItem cartItem : request.getItems()) {
            MenuItem menuItem = menuService.getMenuItemById(cartItem.getMenuItemId());

            OrderItem orderItem = OrderItem.builder()
                    .order(order)
                    .menuItem(menuItem)
                    .quantity(cartItem.getQuantity())
                    .price(cartItem.getPrice())
                    .build();
            orderItem.calculateSubtotal();

            order.getOrderItems().add(orderItem);
        }

        // ì €ì¥
        Order savedOrder = orderRepository.save(order);

        // ì‘ë‹µ DTO ë³€í™˜
        return convertToResponse(savedOrder);
    }

    // ì£¼ë¬¸ ì¡°íšŒ
    @Transactional(readOnly = true)
    public OrderResponse getOrderByNumber(String orderNumber) {
        Order order = orderRepository.findByOrderNumber(orderNumber)
                .orElseThrow(() -> new RuntimeException("ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + orderNumber));
        return convertToResponse(order);
    }

    // ëŒ€ê¸° ì¤‘ì¸ ì£¼ë¬¸ ëª©ë¡
    @Transactional(readOnly = true)
    public List<OrderResponse> getPendingOrders() {
        return orderRepository.findByStatusOrderByOrderedAtAsc(OrderStatus.PENDING)
                .stream()
                .map(this::convertToResponse)
                .collect(Collectors.toList());
    }

    // ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„±
    private String generateOrderNumber() {
        String dateStr = LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyyyMMdd"));
        long count = orderRepository.count() + 1;
        return String.format("ORD-%s-%03d", dateStr, count);
    }

    // Order â†’ OrderResponse ë³€í™˜
    private OrderResponse convertToResponse(Order order) {
        List<CartItem> items = order.getOrderItems().stream()
                .map(orderItem -> CartItem.builder()
                        .menuItemId(orderItem.getMenuItem().getId())
                        .menuItemName(orderItem.getMenuItem().getName())
                        .price(orderItem.getPrice())
                        .quantity(orderItem.getQuantity())
                        .subtotal(orderItem.getSubtotal())
                        .build())
                .collect(Collectors.toList());

        return OrderResponse.builder()
                .id(order.getId())
                .orderNumber(order.getOrderNumber())
                .customerName(order.getCustomerName())
                .totalAmount(order.getTotalAmount())
                .status(order.getStatus())
                .items(items)
                .orderedAt(order.getOrderedAt())
                .build();
    }
}
```

---

### 4ë‹¨ê³„: ì»¨íŠ¸ë¡¤ëŸ¬ (íŒ€ì› 3)

#### 4.1 HomeController.java

```java
package com.cafekiosk.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class HomeController {

    @GetMapping("/")
    public String home() {
        return "redirect:/menu";
    }
}
```

---

#### 4.2 MenuController.java

```java
package com.cafekiosk.controller;

import com.cafekiosk.model.Category;
import com.cafekiosk.model.MenuItem;
import com.cafekiosk.service.MenuService;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@Controller
@RequestMapping("/menu")
@RequiredArgsConstructor
public class MenuController {

    private final MenuService menuService;

    @GetMapping
    public String viewMenu(
            @RequestParam(required = false) Long categoryId,
            Model model) {

        List<Category> categories = menuService.getAllCategories();
        List<MenuItem> menuItems;

        if (categoryId != null) {
            menuItems = menuService.getMenuItemsByCategory(categoryId);
        } else {
            menuItems = menuService.getAllAvailableMenuItems();
        }

        model.addAttribute("categories", categories);
        model.addAttribute("menuItems", menuItems);
        model.addAttribute("selectedCategoryId", categoryId);

        return "menu";
    }
}
```

---

#### 4.3 CartController.java

```java
package com.cafekiosk.controller;

import com.cafekiosk.dto.CartItem;
import com.cafekiosk.service.CartService;
import jakarta.servlet.http.HttpSession;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

import java.math.BigDecimal;
import java.util.List;

@Controller
@RequestMapping("/cart")
@RequiredArgsConstructor
public class CartController {

    private final CartService cartService;

    @GetMapping
    public String viewCart(HttpSession session, Model model) {
        List<CartItem> cart = cartService.getCart(session);
        BigDecimal total = cartService.getCartTotal(session);

        model.addAttribute("cartItems", cart);
        model.addAttribute("cartTotal", total);

        return "cart";
    }

    @PostMapping("/add")
    public String addToCart(
            @RequestParam Long menuItemId,
            @RequestParam(defaultValue = "1") Integer quantity,
            HttpSession session) {

        cartService.addToCart(session, menuItemId, quantity);
        return "redirect:/menu";
    }

    @PostMapping("/remove/{menuItemId}")
    public String removeFromCart(
            @PathVariable Long menuItemId,
            HttpSession session) {

        cartService.removeFromCart(session, menuItemId);
        return "redirect:/cart";
    }

    @PostMapping("/clear")
    public String clearCart(HttpSession session) {
        cartService.clearCart(session);
        return "redirect:/cart";
    }
}
```

---

#### 4.4 OrderController.java

```java
package com.cafekiosk.controller;

import com.cafekiosk.dto.CartItem;
import com.cafekiosk.dto.OrderRequest;
import com.cafekiosk.dto.OrderResponse;
import com.cafekiosk.service.CartService;
import com.cafekiosk.service.OrderService;
import jakarta.servlet.http.HttpSession;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@Controller
@RequestMapping("/order")
@RequiredArgsConstructor
public class OrderController {

    private final OrderService orderService;
    private final CartService cartService;

    @PostMapping("/checkout")
    public String checkout(
            @RequestParam(required = false) String customerName,
            HttpSession session,
            Model model) {

        List<CartItem> cart = cartService.getCart(session);

        if (cart.isEmpty()) {
            return "redirect:/cart";
        }

        // ì£¼ë¬¸ ìƒì„±
        OrderRequest request = OrderRequest.builder()
                .customerName(customerName)
                .items(cart)
                .build();

        OrderResponse order = orderService.createOrder(request);

        // ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
        cartService.clearCart(session);

        // ì£¼ë¬¸ ì™„ë£Œ í˜ì´ì§€ë¡œ
        model.addAttribute("order", order);
        return "order-complete";
    }

    @GetMapping("/{orderNumber}")
    public String viewOrder(@PathVariable String orderNumber, Model model) {
        OrderResponse order = orderService.getOrderByNumber(orderNumber);
        model.addAttribute("order", order);
        return "order-complete";
    }
}
```

---

#### 4.5 GlobalExceptionHandler.java

```java
package com.cafekiosk.exception;

import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;

@ControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(ResourceNotFoundException.class)
    public String handleNotFound(ResourceNotFoundException ex, Model model) {
        model.addAttribute("error", ex.getMessage());
        return "error/404";
    }

    @ExceptionHandler(Exception.class)
    public String handleException(Exception ex, Model model) {
        model.addAttribute("error", "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + ex.getMessage());
        return "error/500";
    }
}
```

---

#### 4.6 ResourceNotFoundException.java

```java
package com.cafekiosk.exception;

public class ResourceNotFoundException extends RuntimeException {
    public ResourceNotFoundException(String message) {
        super(message);
    }
}
```

#### 5.6 kiosk.js

```javascript
// src/main/resources/static/js/kiosk.js

document.addEventListener("DOMContentLoaded", function () {
  console.log("Cafe Kiosk initialized");

  // ìˆ˜ëŸ‰ ì¦ê°€/ê°ì†Œ ë²„íŠ¼ (í•„ìš”ì‹œ ì¶”ê°€)
  const quantityInputs = document.querySelectorAll('input[name="quantity"]');

  quantityInputs.forEach((input) => {
    input.addEventListener("change", function () {
      if (this.value < 1) this.value = 1;
      if (this.value > 99) this.value = 99;
    });
  });

  // í¼ ì œì¶œ í™•ì¸
  const checkoutForm = document.querySelector(
    'form[action*="/order/checkout"]'
  );
  if (checkoutForm) {
    checkoutForm.addEventListener("submit", function (e) {
      if (!confirm("ì£¼ë¬¸ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        e.preventDefault();
      }
    });
  }
});
```

---

### 6ë‹¨ê³„: ìƒ˜í”Œ ë°ì´í„° (data.sql)

**`src/main/resources/data.sql`:**

```sql
-- ì¹´í…Œê³ ë¦¬
INSERT INTO categories (id, name, description, display_order, created_at) VALUES
(1, 'ì»¤í”¼', 'ì‹ ì„ í•œ ì›ë‘ë¡œ ë§Œë“  ì»¤í”¼', 1, NOW()),
(2, 'ë””ì €íŠ¸', 'ë‹¬ì½¤í•œ ë””ì €íŠ¸', 2, NOW()),
(3, 'ìŒë£Œ', 'ì‹œì›í•œ ìŒë£Œ', 3, NOW())
ON DUPLICATE KEY UPDATE name=name;

-- ë©”ë‰´ í•­ëª©
INSERT INTO menu_items (id, name, description, price, image_url, available, category_id, created_at, updated_at) VALUES
-- ì»¤í”¼
(1, 'ì•„ë©”ë¦¬ì¹´ë…¸', 'ê¹”ë”í•œ ì—ìŠ¤í”„ë ˆì†Œì™€ ë¬¼', 3000.00, 'https://via.placeholder.com/300?text=Americano', TRUE, 1, NOW(), NOW()),
(2, 'ì¹´í˜ë¼ë–¼', 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ ì™€ ì—ìŠ¤í”„ë ˆì†Œ', 3500.00, 'https://via.placeholder.com/300?text=Latte', TRUE, 1, NOW(), NOW()),
(3, 'ì¹´í‘¸ì¹˜ë…¸', 'í’ì„±í•œ ê±°í’ˆê³¼ ì—ìŠ¤í”„ë ˆì†Œ', 3500.00, 'https://via.placeholder.com/300?text=Cappuccino', TRUE, 1, NOW(), NOW()),
(4, 'ë°”ë‹ë¼ ë¼ë–¼', 'ë‹¬ì½¤í•œ ë°”ë‹ë¼ ì‹œëŸ½ê³¼ ìš°ìœ ', 4000.00, 'https://via.placeholder.com/300?text=Vanilla+Latte', TRUE, 1, NOW(), NOW()),

-- ë””ì €íŠ¸
(5, 'ì´ˆì½œë¦¿ ì¼€ì´í¬', 'ì§„í•œ ì´ˆì½œë¦¿ ì¼€ì´í¬', 5000.00, 'https://via.placeholder.com/300?text=Choco+Cake', TRUE, 2, NOW(), NOW()),
(6, 'ì¹˜ì¦ˆì¼€ì´í¬', 'ë¶€ë“œëŸ¬ìš´ ë‰´ìš• ìŠ¤íƒ€ì¼', 5500.00, 'https://via.placeholder.com/300?text=Cheesecake', TRUE, 2, NOW(), NOW()),
(7, 'í¬ë£¨ì•„ìƒ', 'ë°”ì‚­í•œ ë²„í„° í¬ë£¨ì•„ìƒ', 3000.00, 'https://via.placeholder.com/300?text=Croissant', TRUE, 2, NOW(), NOW()),
(8, 'ë§ˆì¹´ë¡±', 'ë‹¬ì½¤í•œ í”„ë‘ìŠ¤ ë§ˆì¹´ë¡±', 2000.00, 'https://via.placeholder.com/300?text=Macaron', TRUE, 2, NOW(), NOW()),

-- ìŒë£Œ
(9, 'ì˜¤ë Œì§€ ì£¼ìŠ¤', 'ì‹ ì„ í•œ ì˜¤ë Œì§€ ì£¼ìŠ¤', 4000.00, 'https://via.placeholder.com/300?text=Orange+Juice', TRUE, 3, NOW(), NOW()),
(10, 'ë”¸ê¸° ìŠ¤ë¬´ë””', 'ë‹¬ì½¤í•œ ë”¸ê¸° ìŠ¤ë¬´ë””', 4500.00, 'https://via.placeholder.com/300?text=Strawberry+Smoothie', TRUE, 3, NOW(), NOW()),
(11, 'ë…¹ì°¨ ë¼ë–¼', 'ê³ ì†Œí•œ ë…¹ì°¨ ë¼ë–¼', 4000.00, 'https://via.placeholder.com/300?text=Green+Tea+Latte', TRUE, 3, NOW(), NOW())
ON DUPLICATE KEY UPDATE name=name;
```

---

## ì£¼ì°¨ë³„ ì¼ì •

### 1ì£¼ì°¨: í™˜ê²½ ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤

- **Day 1**: í”„ë¡œì íŠ¸ ì´ˆê¸°í™”, MySQL ì„¤ì •
- **Day 2-3**: Entity + Repository ì‘ì„± (íŒ€ì› 1)
- **Day 4**: Repository í…ŒìŠ¤íŠ¸ ì‘ì„±
- **Day 5**: ì¤‘ê°„ ì ê²€

### 2ì£¼ì°¨: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

- **Day 6-7**: DTO ì‘ì„± (íŒ€ì› 2)
- **Day 8-9**: Service ì‘ì„± (íŒ€ì› 2)
- **Day 10**: Service í…ŒìŠ¤íŠ¸ ì‘ì„±

### 3ì£¼ì°¨: ë°±ì—”ë“œ ì™„ì„±

- **Day 11-12**: Controller ì‘ì„± (íŒ€ì› 3)
- **Day 13**: Exception Handler ì‘ì„± (íŒ€ì› 3)
- **Day 14**: Postmanìœ¼ë¡œ API í…ŒìŠ¤íŠ¸
- **Day 15**: ì¤‘ê°„ ì ê²€

### 4ì£¼ì°¨: í”„ë¡ íŠ¸ì—”ë“œ

- **Day 16-17**: layout.html, menu.html (íŒ€ì› 4)
- **Day 18**: cart.html (íŒ€ì› 4)
- **Day 19**: order-complete.html (íŒ€ì› 4)
- **Day 20**: CSS/JS ì‘ì„±

### 5ì£¼ì°¨: í†µí•© ë° í…ŒìŠ¤íŠ¸

- **Day 21-22**: ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸
- **Day 23**: ë²„ê·¸ ìˆ˜ì •
- **Day 24**: UI ê°œì„ 
- **Day 25**: ìµœì¢… ì ê²€

### 6ì£¼ì°¨: ë°œí‘œ ì¤€ë¹„

- **Day 26-27**: README ì‘ì„±, ë¬¸ì„œ ì •ë¦¬
- **Day 28**: ë°œí‘œ ìë£Œ ì¤€ë¹„
- **Day 29**: ì‹œì—° ì—°ìŠµ
- **Day 30**: ìµœì¢… ë°œí‘œ

---

## ì‹¤í–‰ ë°©ë²•

### 1. MySQL ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±

```sql
CREATE DATABASE cafe_kiosk CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ ìƒì„±:

```properties
DB_USERNAME=root
DB_PASSWORD=your_password
```

### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

```bash
mvn spring-boot:run
```

### 4. ë¸Œë¼ìš°ì € ì ‘ì†

```
http://localhost:8080
```

---

## í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ê¸°ë³¸ íë¦„

1. âœ… ë©”ë‰´ í˜ì´ì§€ ì ‘ì†
2. âœ… ì¹´í…Œê³ ë¦¬ í•„í„°ë§
3. âœ… ì¥ë°”êµ¬ë‹ˆì— í•­ëª© ì¶”ê°€
4. âœ… ì¥ë°”êµ¬ë‹ˆ í™•ì¸
5. âœ… ì£¼ë¬¸í•˜ê¸°
6. âœ… ì£¼ë¬¸ ì™„ë£Œ í™•ì¸

### ì—£ì§€ ì¼€ì´ìŠ¤

- âŒ ë¹ˆ ì¥ë°”êµ¬ë‹ˆë¡œ ì£¼ë¬¸ ì‹œë„
- âŒ ìˆ˜ëŸ‰ 0 ë˜ëŠ” ìŒìˆ˜
- âŒ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë©”ë‰´ ID

---

## íŒ€ì›ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… íŒ€ì› 1 (Database)

- [ ] OrderStatus enum ì‘ì„±
- [ ] Category entity ì‘ì„±
- [ ] MenuItem entity ì‘ì„±
- [ ] Order entity ì‘ì„±
- [ ] OrderItem entity ì‘ì„±
- [ ] CategoryRepository ì‘ì„±
- [ ] MenuItemRepository ì‘ì„±
- [ ] OrderRepository ì‘ì„±
- [ ] Repository í…ŒìŠ¤íŠ¸ ì‘ì„±

### âœ… íŒ€ì› 2 (Business Logic)

- [ ] CartItem DTO ì‘ì„±
- [ ] OrderRequest DTO ì‘ì„±
- [ ] OrderResponse DTO ì‘ì„±
- [ ] MenuService ì‘ì„±
- [ ] CartService ì‘ì„±
- [ ] OrderService ì‘ì„±
- [ ] Service í…ŒìŠ¤íŠ¸ ì‘ì„±

### âœ… íŒ€ì› 3 (Controllers)

- [ ] HomeController ì‘ì„±
- [ ] MenuController ì‘ì„±
- [ ] CartController ì‘ì„±
- [ ] OrderController ì‘ì„±
- [ ] GlobalExceptionHandler ì‘ì„±
- [ ] ResourceNotFoundException ì‘ì„±
- [ ] Postman í…ŒìŠ¤íŠ¸ ì™„ë£Œ

---

## ì¶”ê°€ ê¸°ëŠ¥ ì•„ì´ë””ì–´ (ì„ íƒì‚¬í•­)

### ë‚œì´ë„: í•˜

- [ ] ì£¼ë¬¸ ë²ˆí˜¸ë¡œ ì£¼ë¬¸ ì¡°íšŒ í˜ì´ì§€
- [ ] ì¸ê¸° ë©”ë‰´ í‘œì‹œ (ì£¼ë¬¸ íšŸìˆ˜ ê¸°ë°˜)
- [ ] ë©”ë‰´ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥

### ë‚œì´ë„: ì¤‘

- [ ] ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ (PENDING â†’ READY)
- [ ] ê°„ë‹¨í•œ ê´€ë¦¬ì í˜ì´ì§€ (ì£¼ë¬¸ ëª©ë¡)
- [ ] ë‚ ì§œë³„ ë§¤ì¶œ í†µê³„

### ë‚œì´ë„: ìƒ

- [ ] ì‹¤ì‹œê°„ ì£¼ë¬¸ ì•Œë¦¼ (WebSocket)
- [ ] ì¹´ì¹´ì˜¤í˜ì´/í† ìŠ¤í˜ì´ ì—°ë™
- [ ] íšŒì› ì‹œìŠ¤í…œ ì¶”ê°€

---

## ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)

**Q: ì´ë¯¸ì§€ëŠ” ì–´ë–»ê²Œ ì¶”ê°€í•˜ë‚˜ìš”?**
A: `src/main/resources/static/images/menu/` í´ë”ì— ì´ë¯¸ì§€ íŒŒì¼ì„ ë„£ê³ , `image_url` ì»¬ëŸ¼ì— `/images/menu/íŒŒì¼ëª….jpg` í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ì„¸ìš”.

**Q: ì¥ë°”êµ¬ë‹ˆê°€ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì‚¬ë¼ì ¸ìš”.**
A: í˜„ì¬ëŠ” ì„¸ì…˜ ê¸°ë°˜ì´ë¯€ë¡œ ì„¸ì…˜ì´ ë§Œë£Œë˜ë©´ ì‚¬ë¼ì§‘ë‹ˆë‹¤. DBì— ì €ì¥í•˜ë ¤ë©´ `CartItem` í…Œì´ë¸”ì„ ì¶”ê°€í•˜ì„¸ìš”.

**Q: í•œêµ­ì–´ê°€ ê¹¨ì ¸ìš”.**
A: `application.yml`ì˜ `datasource.url`ì— `?characterEncoding=UTF-8`ì„ ì¶”ê°€í•˜ì„¸ìš”.

**Q: Bootstrapì´ ì•ˆ ë‚˜ì™€ìš”.**
A: `pom.xml`ì— webjars ì˜ì¡´ì„±ì´ ìˆëŠ”ì§€, `webjars-locator`ê°€ ì¶”ê°€ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

---

## ë§ˆë¬´ë¦¬

ì´ ê°€ì´ë“œë¥¼ ë”°ë¼í•˜ë©´ **ì™„ì „íˆ ì‘ë™í•˜ëŠ” ì¹´í˜ í‚¤ì˜¤ìŠ¤í¬ ì‹œìŠ¤í…œ**ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!

ê° íŒ€ì›ì€ ìì‹ ì˜ ì—­í• ì— ì§‘ì¤‘í•˜ê³ , ì£¼ 1íšŒ í†µí•© íšŒì˜ë¥¼ í†µí•´ ì§„í–‰ ìƒí™©ì„ ê³µìœ í•˜ì„¸ìš”.

**í™”ì´íŒ…! ğŸ‰**

```

```
